<turbo-frame id="carrousel">
  <div class="relative w-full">

    <!-- Imagen -->
    <% if @images[@current_index].present? %>
      <%= image_tag @images[@current_index],
      class: "w-full h-[500px] object-cover rounded-xl shadow" %>
    <% end %>

    <% if @images.size > 1 %>

      <% prev_index = (@current_index - 1) % @images.size %>
      <% next_index = (@current_index + 1) % @images.size %>

      <!-- Flecha izquierda -->
      <%= link_to product_path(@product, img: prev_index),
          data: { turbo_frame: "carrousel" },
          class: "absolute left-4 top-1/2 -translate-y-1/2
                  bg-black/60 hover:bg-black/80 text-white
                  w-10 h-10 flex items-center justify-center
                  rounded-full text-2xl select-none" do %>
        ‹
      <% end %>

      <!-- Flecha derecha -->
      <%= link_to product_path(@product, img: next_index),
          data: { turbo_frame: "carrousel" },
          class: "absolute right-4 top-1/2 -translate-y-1/2
                  bg-black/60 hover:bg-black/80 text-white
                  w-10 h-10 flex items-center justify-center
                  rounded-full text-2xl select-none" do %>
        ›
      <% end %>

      <!-- Indicador -->
      <div class="absolute bottom-4 left-1/2 -translate-x-1/2
                  bg-black/60 text-white text-sm px-4 py-1 rounded-full">
        <%= @current_index + 1 %> / <%= @images.size %>
      </div>

    <% end %>
  </div>
</turbo-frame>
